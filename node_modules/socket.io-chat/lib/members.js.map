{"version":3,"sources":["../src/members.es6"],"names":[],"mappings":";;;;;;;;;;AAAA,AAAC,CAAA,YAAY;AACZ,aAAY,CAAC;;KAEP,MAAM;YAAN,MAAM;;AACA,WADN,MAAM,GACU;yBADhB,MAAM;;qCACI,IAAI;AAAJ,QAAI;;;AAClB,8BAFI,MAAM,8CAED,IAAI,EAAE;GACf;;SAHI,MAAM;IAAS,KAAK;;KAMpB,OAAO;AACD,WADN,OAAO,GACE;yBADT,OAAO;;AAEX,OAAI,CAAC,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC;GAC3B;;eAHI,OAAO;;UAKT,aAAC,EAAE,EAAE,MAAM,EAAE;AACf,QAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE;AACpC,SAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,MAAM,EAAE,CAAC,CAAC;KAC7C;;AAED,QAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;AAE5C,WAAO,IAAI,CAAC;IACZ;;;UAEK,gBAAC,EAAE,EAAE,MAAM,EAAE;AAClB,QAAI,MAAM,EAAE,WAAW,CAAC;;AAExB,QAAI,MAAM,EAAE;AACX,WAAM,GAAQ,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;;AAE7C,SAAI,MAAM,EAAE;AACX,iBAAW,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACrC,YAAM,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;;AAE9B,UAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;AACxB,WAAI,CAAC,SAAS,UAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;OAClC;MACD;KACD,MAAM;AACN,SAAI,CAAC,SAAS,UAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;KAClC;;AAED,WAAO,IAAI,CAAC;IACZ;;;UAEE,aAAC,EAAE,EAAE;;;AACP,QAAI,GAAG,EAAE,MAAM,CAAC;;AAEhB,QAAI,EAAE,YAAY,KAAK,EAAE;AACxB,QAAG,GAAG,EAAE,CAAC;;AAET,OAAE,CAAC,OAAO,CAAC,UAAC,EAAE,EAAK;AAClB,YAAM,GAAG,MAAK,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;AACxC,YAAM,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,MAAM,EAAE;AAC1C,aAAM,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;OAC3B,CAAC,CAAC;MACH,CAAC,CAAC;;AAEH,YAAO,GAAG,CAAC;KACX,MAAM;AACN,YAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;KACtC;IACD;;;UAEO,kBAAC,EAAE,EAAE;AACZ,WAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IACnF;;;SAzDI,OAAO;;;AA4Db,OAAM,CAAC,OAAO,GAAG,OAAO,CAAC;CACzB,CAAA,EAAE,CAAE","file":"members.js","sourcesContent":["(function () {\n\t'use strict';\n\n\tclass Member extends Array {\n\t\tconstructor(...args) {\n\t\t\tsuper(...args);\n\t\t}\n\t}\n\n\tclass Members {\n\t\tconstructor() {\n\t\t\tthis.__members = new Map();\n\t\t}\n\n\t\tadd(id, socket) {\n\t\t\tif (!this.__members.has(String(id))) {\n\t\t\t\tthis.__members.set(String(id), new Member());\n\t\t\t}\n\n\t\t\tthis.__members.get(String(id)).push(socket);\n\n\t\t\treturn this;\n\t\t}\n\n\t\tremove(id, socket) {\n\t\t\tvar member, socketIndex;\n\n\t\t\tif (socket) {\n\t\t\t\tmember      = this.__members.get(String(id));\n\n\t\t\t\tif (member) {\n\t\t\t\t\tsocketIndex = member.indexOf(socket);\n\t\t\t\t\tmember.splice(socketIndex, 1);\n\n\t\t\t\t\tif (member.length === 0) {\n\t\t\t\t\t\tthis.__members.delete(String(id));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.__members.delete(String(id));\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\tget(id) {\n\t\t\tvar res, member;\n\n\t\t\tif (id instanceof Array) {\n\t\t\t\tres = [];\n\n\t\t\t\tid.forEach((id) => {\n\t\t\t\t\tmember = this.__members.get(String(id));\n\t\t\t\t\tmember && member.forEach(function (socket) {\n\t\t\t\t\t\tsocket && res.push(socket);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\treturn res;\n\t\t\t} else {\n\t\t\t\treturn this.__members.get(String(id));\n\t\t\t}\n\t\t}\n\n\t\tisOnline(id) {\n\t\t\treturn this.__members.has(String(id)) && this.__members.get(String(id)).length > 0;\n\t\t}\n\t}\n\n\tmodule.exports = Members;\n}());"]}