{"version":3,"sources":["../src/clientValidators.es6"],"names":[],"mappings":";;;;;QAEgB,eAAe,GAAf,eAAe;QAMf,iBAAiB,GAAjB,iBAAiB;QAejB,cAAc,GAAd,cAAc;AAvB9B,YAAY,CAAC;;AAEN,SAAS,eAAe,CAAE,IAAI,EAAE;AACtC,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC;AAClD,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;AAC1E,KAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;CACjB;;AAEM,SAAS,iBAAiB,CAAE,OAAO,EAAE,IAAI,EAAE;AACjD,KAAI,OAAO,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;AACpC,MAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CACxC,IAAI,CAAC,UAAU,SAAS,EAAE;AAC1B,YAAS,KAAK,OAAO,CAAC,IAAI,GAAG,SAAS,CAAA,AAAC,CAAC;AACxC,YAAS,KAAK,OAAO,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAA,AAAC,CAAC;AAC3C,UAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACpB,OAAI,EAAE,CAAC;GACP,CAAC,SACI,CAAC,IAAI,CAAC,CAAC;EACd,MAAM;AACN,MAAI,EAAE,CAAC;EACP;CACD;;AAEM,SAAS,cAAc,CAAE,OAAO,EAAE,IAAI,EAAE;AAC9C,KAAI,IAAI,CAAC;;AAET,KAAI,GAAG,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,EAAC,EAAG,CAAC;AAClC,KAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;;AAEhC,QAAO,CAAC,IAAI,GAAG,IAAI,CAAC;;AAEpB,KAAI,EAAE,CAAC;CACP","file":"src/clientValidators.es6","sourcesContent":["'use strict';\n\nexport function chatMessagesInc (data) {\n\tdata.chat.fill('lastMessageAt', new Date(), true);\n\tdata.chat.fill('countMessages', data.chat.get('countMessages') + 1, true);\n\tdata.chat.save();\n}\n\nexport function singlePrivateChat (options, next) {\n\tif (options.chat.type === 'private') {\n\t\tthis.model('chat').findEqual(options.chat)\n\t\t\t.then(function (equalChat) {\n\t\t\t\tequalChat && (options.chat = equalChat);\n\t\t\t\tequalChat && (options.chat.isEqual = true);\n\t\t\t\tconsole.log('next');\n\t\t\t\tnext();\n\t\t\t})\n\t\t\t.catch(next);\n\t} else {\n\t\tnext();\n\t}\n}\n\nexport function newChatOnGroup (options, next) {\n\tvar chat;\n\n\tchat = new (this.model('chat'))();\n\tchat.set(options.chat.toJSON());\n\n\toptions.chat = chat;\n\n\tnext();\n}"]}