{"version":3,"sources":["../src/schema.es6"],"names":[],"mappings":";;;;;;AAAA,AAAC,CAAA,YAAY;AACZ,aAAY,CAAC;;AAEb,KAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,KAAI,CAAC,GAAI,OAAO,CAAC,YAAY,CAAC,CAAC;;KAEzB,YAAY;WAAZ,YAAY;yBAAZ,YAAY;;;eAAZ,YAAY;;UACb,cAAC,UAAU,EAAE;AAChB,QAAI,MAAM,GAAG,EAAE,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;;AAEzC,QAAI,MAAM,EAAE;AACX,YAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;KAC1B;;AAED,WAAO,IAAI,CAAC;IACZ;;;UAEO,kBAAC,MAAM,EAAE;;;AAGhB,QAAI,MAAM,GAAG,EAAE,CAAC;;AAEhB,QAAI,MAAM,GAAG,SAAT,MAAM,CAAa,KAAK,EAAE,MAAM,EAAE;AACrC,MAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE,GAAG,EAAE;AAClC,UAAI,IAAI,CAAC,UAAU,EAAE;AACpB,aAAM,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;OACjB;;AAED,UAAI,IAAI,WAAQ,EAAE;AACjB,WAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,WAAQ,CAAC,IAAI,IAAI,WAAQ,CAAC,IAAI,EAAE;;AAElD,cAAM,CAAC,GAAG,CAAC,GAAG,IAAI,WAAQ,CAAC,KAAK,GAC7B,MAAM,CAAC,IAAI,WAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,WAAQ,CAAC,KAAK,CAAC,GAC7C,MAAM,CAAC,IAAI,WAAQ,CAAC,IAAI,CAAC,EAAE,CAAC;QAE/B,MAAM,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,WAAQ,CAAC,EAAE;AACpC,cAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,OAAO,CAAC,IAAI,WAAQ,CAAC,GACvD,IAAI,GACJ,MAAM,CAAC,IAAI,WAAQ,CAAC,EAAE,CAAC;QAC1B;OACD;;AAED,UAAI,IAAI,CAAC,UAAU,EAAE;AACpB,aAAM,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;OACrC;MACD,CAAC,CAAC;KACH,CAAC;;AAEF,UAAM,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;;;;AAIlC,WAAO,MAAM,CAAC;IACd;;;SA/CI,YAAY;;;AAkDlB,OAAM,CAAC,OAAO,GAAG,YAAY,CAAC;CAC9B,CAAA,EAAE,CAAE","file":"schema.js","sourcesContent":["(function () {\n\t\"use strict\";\n\n\tvar fs = require('fs');\n\tvar _  = require('underscore');\n\n\tclass SchemaLoader {\n\t\tload(schemaPath) {\n\t\t\tvar schema = fs.readFileSync(schemaPath);\n\n\t\t\tif (schema) {\n\t\t\t\treturn JSON.parse(schema);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\tdefaults(schema) {\n\t\t\t//console.time('defaults');\n\n\t\t\tvar output = {};\n\n\t\t\tvar walker = function (props, output) {\n\t\t\t\t_.each(props, function (prop, key) {\n\t\t\t\t\tif (prop.properties) {\n\t\t\t\t\t\toutput[key] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (prop.default) {\n\t\t\t\t\t\tif (_.isObject(prop.default) && prop.default.type) {\n\n\t\t\t\t\t\t\toutput[key] = prop.default.value\n\t\t\t\t\t\t\t\t? global[prop.default.type](prop.default.value)\n\t\t\t\t\t\t\t\t: global[prop.default.type]();\n\n\t\t\t\t\t\t} else if (_.isString(prop.default)) {\n\t\t\t\t\t\t\toutput[key] = ~['null', 'undefined'].indexOf(prop.default)\n\t\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t\t: global[prop.default]();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (prop.properties) {\n\t\t\t\t\t\twalker(prop.properties, output[key]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\twalker(schema.properties, output);\n\n\t\t\t//console.timeEnd('defaults');\n\n\t\t\treturn output;\n\t\t}\n\t}\n\n\tmodule.exports = SchemaLoader;\n}());"]}